{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport IsEmptyObject from \"../../../service/IsEmptyObject\";\nimport GetUser from \"../services/GetUser\";\n\nconst useTaskForm = HandleChangePassword => {\n  _s();\n\n  const [values, setValues] = useState({\n    oldpass: \"\",\n    newpass: \"\",\n    repass: \"\"\n  });\n  const [errors, setErrors] = useState({});\n\n  const validateInfo = (values, userTemp) => {\n    let errors = {};\n    const user = GetUser(userTemp.id);\n    console.log(user);\n    const oldpassTemp = values.oldpass.trim();\n    const newpassTemp = values.newpass.trim();\n    const repassTemp = values.repass.trim();\n\n    if (!oldpassTemp) {\n      errors.oldpass = \"Oldpass must be required\";\n    } else if (oldpassTemp.length < 6) {\n      errors.oldpass = \"Oldpass to be 6 charactor or more\";\n    } else if (oldpassTemp !== user.password) {\n      errors.oldpass = \"Oldpass not correct\";\n    }\n\n    if (!newpassTemp) {\n      errors.newpass = \"Newpass must be required\";\n    } else if (newpassTemp.length < 6) {\n      errors.newpass = \"Newpass to be 6 charactor or more\";\n    } else if (newpassTemp === oldpassTemp) {\n      errors.newpass = \"Newpass must be difference from oldpass\";\n    }\n\n    if (!repassTemp) {\n      errors.repass = \"Repass must be required\";\n    } else if (repassTemp.length < 6) {\n      errors.repass = \"Repass to be 6 charactor or more\";\n    } else if (repassTemp != newpassTemp) {\n      errors.repass = \"Repass must be math with newpass\";\n    }\n\n    return errors;\n  };\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const userTemp = JSON.parse(localStorage.getItem(\"user\"));\n    let errorsTemp = validateInfo(values, userTemp);\n    setErrors(errorsTemp);\n\n    if (IsEmptyObject(errorsTemp)) {\n      HandleChangePassword(values, userTemp);\n      setValues({\n        oldpass: \"\",\n        newpass: \"\",\n        repass: \"\"\n      });\n    }\n  };\n\n  return {\n    handleChange,\n    handleSubmit,\n    values,\n    errors\n  };\n};\n\n_s(useTaskForm, \"fjg8PORIh5o0AAoNr6ARpQ8p0EE=\");\n\nexport default useTaskForm;","map":{"version":3,"sources":["D:/4.Document/Work/MonstarLab/Intern/ReactJS/todo/src/components/users/services/usePasswordForm.js"],"names":["useState","IsEmptyObject","GetUser","useTaskForm","HandleChangePassword","values","setValues","oldpass","newpass","repass","errors","setErrors","validateInfo","userTemp","user","id","console","log","oldpassTemp","trim","newpassTemp","repassTemp","length","password","handleChange","e","name","value","target","handleSubmit","preventDefault","JSON","parse","localStorage","getItem","errorsTemp"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\r\n\r\nimport IsEmptyObject from \"../../../service/IsEmptyObject\";\r\nimport GetUser from \"../services/GetUser\";\r\n\r\nconst useTaskForm = (HandleChangePassword) => {\r\n  const [values, setValues] = useState({\r\n    oldpass: \"\",\r\n    newpass: \"\",\r\n    repass: \"\",\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const validateInfo = (values, userTemp) => {\r\n    let errors = {};\r\n    const user = GetUser(userTemp.id);\r\n    console.log(user);\r\n\r\n    const oldpassTemp = values.oldpass.trim();\r\n    const newpassTemp = values.newpass.trim();\r\n    const repassTemp = values.repass.trim();\r\n\r\n    if (!oldpassTemp) {\r\n      errors.oldpass = \"Oldpass must be required\";\r\n    } else if (oldpassTemp.length < 6) {\r\n      errors.oldpass = \"Oldpass to be 6 charactor or more\";\r\n    } else if (oldpassTemp !== user.password) {\r\n      errors.oldpass = \"Oldpass not correct\";\r\n    }\r\n\r\n    if (!newpassTemp) {\r\n      errors.newpass = \"Newpass must be required\";\r\n    } else if (newpassTemp.length < 6) {\r\n      errors.newpass = \"Newpass to be 6 charactor or more\";\r\n    } else if (newpassTemp === oldpassTemp) {\r\n      errors.newpass = \"Newpass must be difference from oldpass\";\r\n    }\r\n\r\n    if (!repassTemp) {\r\n      errors.repass = \"Repass must be required\";\r\n    } else if (repassTemp.length < 6) {\r\n      errors.repass = \"Repass to be 6 charactor or more\";\r\n    } else if (repassTemp != newpassTemp) {\r\n      errors.repass = \"Repass must be math with newpass\";\r\n    }\r\n\r\n    return errors;\r\n  };\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    const userTemp = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n    let errorsTemp = validateInfo(values, userTemp);\r\n    setErrors(errorsTemp);\r\n\r\n    if (IsEmptyObject(errorsTemp)) {\r\n      HandleChangePassword(values, userTemp);\r\n      setValues({\r\n        oldpass: \"\",\r\n        newpass: \"\",\r\n        repass: \"\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return { handleChange, handleSubmit, values, errors };\r\n};\r\n\r\nexport default useTaskForm;\r\n"]},"metadata":{},"sourceType":"module"}